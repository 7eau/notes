# 函数式编程

## 什么是函数式编程？

函数式编程是一种编程范式（编程规范）。

它属于["结构化编程"](http://en.wikipedia.org/wiki/Structured_programming)的一种，主要思想是把运算过程尽量写成一系列嵌套的函数调用。举例来说，现在有这样一个数学表达式：

> ```
> 　　(1 + 2) * 3 - 4
> ```
>
> 

传统的过程式编程，可能这样写：

> ```javascript
> 　　var a = 1 + 2;
> 
> 　　var b = a * 3;
> 
> 　　var c = b - 4;
> ```
>
> 

函数式编程要求使用函数，我们可以把运算过程[定义](http://lostechies.com/derickbailey/2012/01/24/some-thoughts-on-functional-javascript/)为不同的函数，然后写成下面这样：

> 　　
>
> ```javascript
> var result = subtract(multiply(add(1,2), 3), 4);
> ```
>
> 

这就是函数式编程。

## 特点

### 1.函数是第一等公民

函数本身可以作为一种“数据类型”，具有一般“数据类型”的用法，如赋值给变量，作为参数，作为返回值。

### 2.只用表达式，不用语句

表达式：一种单纯的运算过程，具有返回值。
语句：执行某种操作，不具有返回值

一个例子就是：`i++`与`i = i + 1`, 前者是语句，因为它仅仅是一种操作，后者就可以认为是一种表达式。

### 3.无副作用

指函数要保持独立，所有功能都是返回一个新的值，没有其他行为（不会修改到外部变量的值）

### 4.不修改状态

不修改变量。

用参数来保存状态，如递归。

```python
def getSum(x):
    if x == 1:
        return 1
    else:
        return x + getSum(x - 1)
```

### 5.引用透明

任何时候输入一样时，要确保输出始终一致，因此， 函数的运行部依赖外部变量或“状态”。 

### 6.运行速度“较慢”

更加抽象化的编程规范，就导致了同样一个功能需要调用许多函数来执行，使用递归等形式时更加明显，导致了函数式编程在单一核心（线程）运行下速度较慢。

但是，函数式编程对于多核心多线程下却是十分高效的一种编程范式。因为以上的种种特点，任意的功能可以放心的放到多线程多核心去运行，不会互相干扰，不会出现死锁等，因此又十分高效。

## 意义

### 1.代码简洁，开发快速

抽象化程度很高，任何功能都被抽象成函数执行，代码复用程度很高，程序也短。

## 2.接近自然语言，易于理解

就如上面的例子中：`(1 + 2) * 3 - 4`

```javascript
subtract(multiply(add(1,2), 3), 4);
```

我们可以很容易的理解它都做了什么。

### 3.更方便的代码管理

功能都被一一抽象，每个函数都是一个独立单元，十分有利于单元测试和排错。

### 4.易于“并发编程”

由特点可知。

### 5.代码的热升级

因为函数都是独立单元，只要函数接口不变，对某函数内部修改不影响其他单元调用。所以，可以直接在线状态下直接升级。